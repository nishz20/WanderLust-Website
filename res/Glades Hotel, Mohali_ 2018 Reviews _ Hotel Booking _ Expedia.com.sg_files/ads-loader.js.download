!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r(n(6));function r(e){return e&&e.__esModule?e:{default:e}}var o=r(n(7)).default;t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!Array.isArray(n))throw new Error("Meso event queue requires an array.");this._callback=t,this._executedEvents=[],this._unExecutedEvents=n,this.isEventQueue=!0}return r(e,[{key:"push",value:function(){var e;(e=this._executedEvents).push.apply(e,arguments),this._callback.apply(this,arguments)}},{key:"executeQueue",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._unExecutedEvents.length;this._unExecutedEvents.length>0&&e>0;)this.push(this._unExecutedEvents.pop()),e-=1}},{key:"executedEvents",get:function(){return this._executedEvents}},{key:"unExecutedEvents",get:function(){return this._unExecutedEvents}}]),e}();t.createEventQueue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new o(e,t);return r.executeQueue(n.limit),r},t.QueuedEventHandler=o},function(e,t,n){"use strict";var r,o=n(3),i=(r=o)&&r.__esModule?r:{default:r};!function(){if(!document||!document.body)throw new Error("Meso loader cannot run. Dependencies not met.");(0,i.default)()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(4);var r=c(n(5)),o=c(n(8)),i=c(n(11)),u=c(n(12));function c(e){return e&&e.__esModule?e:{default:e}}var a=function(){o.default.initEvents(),i.default.initEvents(),u.default.initEvents()};t.default=function(){return(0,r.default)(a)}},function(e,t){!function(){if(window){window.meso=window.meso||{};try{Function("() => {};"),window.meso.ecmascript="6"}catch(e){window.meso.ecmascript="5"}}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r};var u=0;t.default=function(e){var t=[],n=function(){(u-=1)<=0&&e()},r=document.createElement("script");if(r.src=i.default.webcomponents,r.defer="defer",r.onload=n,t.push(r),window&&window.meso&&"5"===window.meso.ecmascript){var o=document.createElement("script");o.src=i.default.webcomponentsadapter,o.defer="defer",o.onload=n,t.push(o)}u=t.length,t.forEach(function(e){document.body.appendChild(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={environmentName:"Development",toolkit:"https://ads-delivery-service.us-west-2.test.expedia.com/api/v1/toolkit",webcomponents:"https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/1.0.22/webcomponents-loader.js",webcomponentsadapter:"https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/1.0.22/custom-elements-es5-adapter.js",fetchTimeout:5e3}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={environmentName:"Production",toolkit:"https://www.uciservice.com/md/api/v1/toolkit",webcomponents:"https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/1.0.22/webcomponents-loader.js",webcomponentsadapter:"https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/1.0.22/custom-elements-es5-adapter.js",fetchTimeout:5e3}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(9),u=(r=i)&&r.__esModule?r:{default:r},c=n(1);function a(e){null!==e&&"object"===(void 0===e?"undefined":o(e))&&(e.hasOwnProperty("canTrack")&&(window.meso.privacy=window.meso.privacy||{},window.meso.privacy.canTrack=e.canTrack),e.pageId&&e.siteId&&e.locale&&u.default.fetchAds(e))}t.default={initEvents:function(){window.meso=window.meso||{},window.meso.initialize=window.meso.initialize||[],window.meso.initialize.isEventQueue||(window.meso.initialize=(0,c.createEventQueue)(a,window.meso.initialize,{limit:1}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(10),i=n(0),u=(r=i)&&r.__esModule?r:{default:r};var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=window.meso&&window.meso.privacy&&window.meso.privacy.canTrack||!1;return e&&e.script&&e.script.forEach(function(e){var r=e.gdprCompliant||!1,i=n||r;if(e.src&&i){window&&window.meso&&"5"===window.meso.ecmascript&&e.repo&&"templates"===e.repo&&(e.src=e.src.replace(/\.js$/,".es5.js"));var u=e;t.push((0,o.promiseScript)(e.src,u))}}),Promise.all(t)};t.default={fetchAds:function(e){var t=e.pageId,n=e.siteId,r=e.locale,i=e.variant,a=void 0===i?u.default.toolkit+"/"+t+"/"+n+"/"+r:u.default.toolkit+"/"+t+"/"+n+"/"+r+"/"+i;(0,o.promiseFetch)(a,{headers:{Accept:"application/json"},mode:"cors"}).then(function(e){return e.json()}).then(function(e){c(e.resources||{}).then(function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new CustomEvent("mesoRender",{detail:e});window.dispatchEvent(t)}(e)})})},_loadResources:c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.currentScript=t.promiseScript=t.promiseFetch=void 0;var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r};t.promiseFetch=function(e){return Promise.race([fetch(e),new Promise(function(e,t){return setTimeout(function(){return t(new Error("Timeout"))},i.default.fetchTimeout)})])},t.promiseScript=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n){for(var r=document.body.getElementsByTagName("script"),o=0;o<r.length;o++)if(r[o].getAttribute("src")===e)return void n(r[o]);var i=["defer","async"],u=document.createElement("script");u.onload=function(){n(u)},Object.keys(t).forEach(function(e){-1!==i.indexOf[e]&&(u[e]=t[e])}),u.src=e,document.body.appendChild(u)})},t.currentScript=function(){if(document){if(document.currentScript)return document.currentScript;var e=/meso-loader\.js$/,t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(document.getElementsByTagName("script"))),n=!0,r=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var c=i.value;if(null!==c.src.match(e))return c}}catch(e){r=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["mesoRender"];t.default={initEvents:function(){window&&r.forEach(function(e){new Event(e)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(1),u=n(13),c=(r=u)&&r.__esModule?r:{default:r};var a={},s={},f=function(e){var t=function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var u,c=Object.entries(e)[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var s=u.value,f=o(s,2),l=f[0],d=f[1];l in a&&a[l]===d||t.push(l)}}catch(e){r=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw i}}return t}(e);if(t.length>0){Object.assign(a,e);var n=JSON.stringify(a);Object.values(s).forEach(function(e){e.requiresUpdate(t)&&e.notify(JSON.parse(n))})}},l=function(e,t,n){return e in s||(s[e]=new c.default(t)),s[e].add(n,a)};t.default={initEvents:function(){window.meso=window.meso||{},window.meso.adcontext=window.meso.adcontext||[],window.meso.adcontext.isEventQueue||(window.meso.adcontext=(0,i.createEventQueue)(f,window.meso.adcontext),window.meso.adcontext.observe=l)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(14),u=(r=i)&&r.__esModule?r:{default:r};var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.watchers=new u.default,this.requirement=t}return o(e,[{key:"requiresUpdate",value:function(e){return this.requirement(e)}},{key:"notify",value:function(e){this.watchers.notify(e)}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.requiresUpdate(Object.keys(t))&&e(t),this.watchers.add(e)}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._count=0,this._events={}}return o(e,[{key:"add",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof e)throw new Error("Targeting notify requires a function for a callback.");var r=this._count,o=function(){return delete t._events[r]};return this._events[r]=[e,n,o],this._count+=1,o}},{key:"notify",value:function(){for(var e=this,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];Object.keys(this._events).forEach(function(t){var o=r(e._events[t],3),i=o[0],u=o[1],c=o[2];i.apply(void 0,n),u.runOnce&&c()})}},{key:"events",get:function(){return this._events}}]),e}();t.default=i}]);
//# sourceMappingURL=ads-loader.js.map